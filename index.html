<html>
  <head>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type"/>
  </head>
  <body>
    <script type="module">
      import init, { Index, Schema, Document, set_panic_hook } from './pkg/test_tantivy.js';

      async function run() {
        
        // modes
        await init();
        set_panic_hook();
        // And afterwards we can use all the functionality defined in wasm.

        let schema = Schema.new();

        schema.add_stored_field("title");
        schema.add_field("quote");

        let index = Index.from_schema(schema);

        let LOTR = Document.new();
        LOTR.add_text("title", "Lord Of The Rings");
        LOTR.add_text("quote", "And some things that should not have been forgotten were lost. History became legend. Legend became myth. And for two and a half thousand years, the ring passed out of all knowledge.");

        index.add_document(LOTR);

        console.log("searching for: “forgotten”", index.search("forgotten"));

        window.strIndex = index.serialize_index();
        window.Index = Index;
      }

      run();
    </script>
  </body>
</html>